<!DOCTYPE html>

<html>
<head>
<title>Gestion del Parking</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
<h1 align="center">gestion del parking</h1>
<div align="center">
<!--boton mostrar vehiculos-->
<form id="mostrar" method="post" action="Gestor"> 
   	<input name="gestion" hidden="true" type="text"  value="mostrar_vehiculos"/>
    <input type="submit" id="submit" value="mostrar vehiculos">
</form>
<br/>
<!--boton busqueda por matricula-->
<div class="divspoiler">
<input type="button" value="busqueda por matricula" onclick="if (this.parentNode.nextSibling.childNodes[0].style.display != '') { this.parentNode.nextSibling.childNodes[0].style.display = ''; this.value = 'Ocultar busqueda'; } else { this.parentNode.nextSibling.childNodes[0].style.display = 'none'; this.value = 'busqueda por matricula'; }">
</div><div><div class="spoiler" style="display: none;">
<form name="buscar_matricula" method="post" onsubmit="return validacion_busqueda_matricula()" action="Gestor"> 
	<input name="gestion" hidden="true" type="text"  value="buscar_matricula"/>
	Busqueda por matricula
   	<input name="matricula" type="text"  value="matricula (4 numeros 3 letras)"></input>
    <input type="submit" id="submit" value="buscar">
</form>
</div></div>
<!--boton cerrado-->
<br/>
<!--boton modificar vehiculo estacionado-->
<div class="divspoiler">
<input type="button" value="modificar vehiculo estacionado" onclick="if (this.parentNode.nextSibling.childNodes[0].style.display != '') { this.parentNode.nextSibling.childNodes[0].style.display = ''; this.value = 'Ocultar modificar'; } else { this.parentNode.nextSibling.childNodes[0].style.display = 'none'; this.value = 'modificar vehiculo estacionado'; }">
</div><div><div class="spoiler" style="display: none;">
<form name="modificar_vehiculo" method="post" onsubmit="return validacion_modificar_vehiculo()" action="Gestor"> 
			<input name="gestion" hidden="true" type="text" value="modificar_vehiculo"/>
			Matrícula del vehículo a modificar
			<input name="matriculavieja" type="text" value="matricula (4 numeros 3 letras)" /> <br>
			Nueva matrícula: <input name="matriculanueva" type="text" id="matricula" value="matricula (4 numeros 3 letras)"/> <br>
			Marca: <input name="marca" type="text" id="marca" /> <br>
			Número de ruedas: <input name="numruedas" type="text" id="numruedas" /> <br>
			¿Tiene motor? 
			<input name="motor" type="radio" value="true" /> Sí
			<input name="motor" type="radio" value="false" /> No <br>
			¿Es automático?
			<input name="automatico" type="radio" value="true" /> Sí
			<input name="automatico" type="radio"value="false" /> No <br>
			Consumo en 100km <input name="consumo" type="text" id="consumo100km" /> <br>
			<input type="submit" id="submit" value="Modificar">
		</form>
</div></div>
<!--boton cerrado-->
<br/>
<!--boton anadir vehiculo estacionado-->
<div class="divspoiler">
<input type="button" value="anadir vehiculo estacionado" onclick="if (this.parentNode.nextSibling.childNodes[0].style.display != '') { this.parentNode.nextSibling.childNodes[0].style.display = ''; this.value = 'Ocultar anadir vehiculo'; } else { this.parentNode.nextSibling.childNodes[0].style.display = 'none'; this.value = 'anadir vehiculo estacionado'; }">
</div><div><div class="spoiler" style="display: none;">
<form name="anyadir_vehiculo" method="post" onsubmit="return validacion_anyadir_vehiculo()" action="Gestor"> 
	<input name="gestion" hidden="true" type="text"  value="anyadir_vehiculo"/>
	Formulario de anadir vehiculo<br/>
	<!-- int numRuedas, boolean motor, String marca, String matricula, boolean automatico, int consumo100km -->
   	matricula:
   	<input name="matricula" type="text"  value="matricula (4 numeros 3 letras)"></input>
   	<br/>numero de ruedas:
   	<input name="numruedas" type="text"  value="4"></input>
   	<br/>vehiculo a motor:
   	<input name="motor" type="radio"  value="si">si
   	<input name="motor" type="radio"  value="no">no
   	<br/>marca del cehiculo:
   	<input name="marca" type="text"  value="marca"></input>
   	<br/>sistema de cambios automatico:
   	<input name="automatico" type="radio"  value="si">si
   	<input name="automatico" type="radio"  value="no">no
   	<br/>consumo a los 100km:
   	<input name="consumo" type="text"  value="consumo100km"></input>
   	<br/>
    <input type="submit" id="submit" value="anyadir">
</form>
</div></div>
<!--boton cerrado-->
<br/>
<!--boton borrar vehiculo estacionado-->
<div class="divspoiler">
<input type="button" value="borrar vehiculo estacionado" onclick="if (this.parentNode.nextSibling.childNodes[0].style.display != '') { this.parentNode.nextSibling.childNodes[0].style.display = ''; this.value = 'Ocultar borrar vehiculo'; } else { this.parentNode.nextSibling.childNodes[0].style.display = 'none'; this.value = 'borrar vehiculo estacionado'; }">
</div><div><div class="spoiler" style="display: none;">
<form name="borrar_vehiculo" method="post" onsubmit="return validacion_borrar_vehiculo()" action="Gestor"> 
	<input name="gestion" hidden="true" type="text"  value="borrar_vehiculo"/>
	<b>Matricula del vehiculo a borrar</b>
   	<input name="matricula" type="text"  value="matricula (4 numeros 3 letras)"></input>
    <input type="submit" id="submit" value="borrar">
</form>
</div></div>
<!--boton cerrado-->
</div><!-- align center -->
<br/>
<script type="text/javascript">
function validacion_busqueda_matricula(){
	console.log("comprobacion busqueda matricuila");
	var x = document.forms["busqueda_matrucula"]["matricula"].value;
	if(validar_matricula(x)){
		console.log("final de validacion ok");
		return true;
	}else{
		console.log("final de validacion error");
		return false;
	};	
	
}
function validacion_modificar_vehiculo() {	
	var x = document.forms["modificar_vehiculo"]["matriculanueva"].value;
	var a = document.forms["modificar_vehiculo"]["matriculavieja"].value;
	if (validar_matricula(a) && validar_matricula(x)) {
		return true;
	} else {
		return false;
	};
}

function validacion_anyadir_vehiculo(){
	var x = document.forms["anyadir_vehiculo"]["matricula"].value;
	if(validar_matricula(x)){
		return true;
	}else{
		return false;
	};		
}

function validacion_borrar_vehiculo(){
	var x = document.forms["borrar_vehiculo"]["matricula"].value;
	if(validar_matricula(x)){
		return true;
	}else{
		return false;
	};		
}

function validar_matricula(x){
    if (x == null || x == "") {
        alert("Escribe la matricula");
        console.log("comprovacion nulo");
        return false;
    }else if(x.length!=7){
        alert("No has introducido una matricula valida (num caracteres)");
        console.log("error numero de caracteres matricula");
        return false;
    }else{
    	var expreg = /^[0-9]{4}[A-Z,a-z]{3}$/;
    	if (expreg.test(x)){
    		//alert("La matricula es correcta");
    		console.log("correcto");
    		return true;
    	}else{
    		alert("La matricula NO es correcta");
    		console.log("error en formato matricula");
    		return false;
    	}
    }
}
</script>

</body>
</html>